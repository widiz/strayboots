<div class="row wrapper border-bottom white-bg page-heading">
	<div class="col-lg-10">
		<h2>Edit User</h2>
		<ol class="breadcrumb">
			<li>
				<a href="<?= $this->url->get('index') ?>">Home</a>
			</li>
			<li>
				<a href="<?= $this->url->get('admin_users') ?>">Users</a>
			</li>
			<li class="active">
				<strong>Edit User</strong>
			</li>
		</ol>
	</div>
	<div class="col-lg-2">
		<div class="title-action">
			<a href="<?= $this->url->get('admin_users') ?>" class="btn btn-default">Back to List</a>
		</div>
	</div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
					<h5>Edit User</h5>
				</div>
				<div class="ibox-content">
					<form method="post" class="form-horizontal" action="<?= $this->url->get('admin_users/edit/' . $user->id) ?>">
						<?php if ($user->type == 'admin' && empty($user->first_name) && empty($user->last_name)): ?>
						<!-- Admin user with only name field -->
						<div class="form-group">
							<label class="col-sm-2 control-label">Name</label>
							<div class="col-sm-10">
								<input type="text" name="name" class="form-control" value="<?= $user->name ?>" required>
							</div>
						</div>
						<?php else: ?>
						<!-- Regular user or admin with first_name/last_name -->
						<div class="form-group">
							<label class="col-sm-2 control-label">First Name</label>
							<div class="col-sm-10">
								<input type="text" name="first_name" class="form-control" value="<?= $user->first_name ?>" required>
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">Last Name</label>
							<div class="col-sm-10">
								<input type="text" name="last_name" class="form-control" value="<?= $user->last_name ?>" required>
							</div>
						</div>
						<?php endif; ?>
						<div class="form-group">
							<label class="col-sm-2 control-label">Email</label>
							<div class="col-sm-10">
								<input type="email" name="email" class="form-control" value="<?= $user->email ?>" required>
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">Type</label>
							<div class="col-sm-10">
								<p class="form-control-static">
									<?php if ($user->type == 'admin'): ?>
										<span class="label label-primary">Admin</span>
									<?php elseif ($user->type == 'client'): ?>
										<span class="label label-info">Client</span>
									<?php else: ?>
										<span class="label label-default">User</span>
									<?php endif; ?>
								</p>
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">Password</label>
							<div class="col-sm-10">
								<input type="password" name="password" class="form-control">
								<span class="help-block">Leave blank to keep current password</span>
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">Active</label>
							<div class="col-sm-10">
								<div class="checkbox">
									<label>
										<input type="checkbox" name="active" value="1" <?= $user->active ? 'checked' : '' ?>>
									</label>
								</div>
							</div>
						</div>
						<div class="hr-line-dashed"></div>
						<div class="form-group">
							<div class="col-sm-4 col-sm-offset-2">
								<a href="<?= $this->url->get('admin_users') ?>" class="btn btn-white">Cancel</a>
								<button class="btn btn-primary" type="submit">Save</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div> 