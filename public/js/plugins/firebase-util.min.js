/*!
 * Firebase-util:  A set of experimental power tools for Firebase.
 *
 * Version: 0.0.0
 * URL: https://github.com/firebase/firebase-util
 * Date: 2016-07-23T15:00:59.535Z
 * License: MIT http://firebase.mit-license.org/
 */
require=function t(e,i,r){function n(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return n(i?i:t)},c,c.exports,t,e,i,r)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(t,e,i){(function(e){e.firebase&&(e.firebase.util=t("firebase-util"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"firebase-util":void 0}],2:[function(t,e,i){i.NormalizedCollection=t("./libs/NormalizedCollection.js")},{"./libs/NormalizedCollection.js":6}],3:[function(t,e,i){"use strict";function r(t,e,i){var r=this;r._ref=null,r._map=t,r._name=e,r._url=i,r.lastMergedValue=s.undef,r._obs=new s.Observable(["child_added","child_removed","child_changed","child_moved","value"],{onAdd:function(t){var e=r._obs.getObservers(t).length;1===e&&r._start(t,r._obs.getObservers().length)},onRemove:function(t){var e=r._obs.getObservers(t).length;0===e&&r._stop(t,r._obs.getObservers().length)}})}function n(t){return function(){throw new Error("Classes implementing AbstractRecord must declare "+t)}}var s=t("../../common/");r.prototype={_start:n("_start"),_stop:n("_stop"),hasChild:n("hasChild"),forEachKey:n("forEach"),getChildSnaps:n("getChildSnaps"),mergeData:n("mergeData"),getClass:n("getClass"),saveData:n("saveData"),getPriority:n("getPriority"),makeChild:n("makeChild"),watch:function(t,e,i,r){this._obs.observe(t,e,i,r)},unwatch:function(t,e,i){this._obs.stopObserving(t,e,i)},getFieldMap:function(){return this._map},getPathManager:function(){return this._map.getPathManager()},setRef:function(t){this._ref=t},getRef:function(){return this._ref},child:function(t){return this.getRef().ref.child(t).$getRecord()},getName:function(){return this._name},getUrl:function(){return this._url},trigger:function(t){s.log.debug("AbstractRecord._trigger: %s",t.toString()),this._obs.triggerEvent(t.event,t.create(this.getRef()))},_cancel:function(t){s.error(t),this._obs.abortObservers(t)}},e.exports=r},{"../../common/":25}],4:[function(t,e,i){"use strict";function r(t){this.fields={},this.length=0,this.pathMgr=t}function n(t,e){return u.find(t,function(t){return t.pathName===e.path&&t.id===e.field})||null}function s(t){this.path=t.path,this.id=t.id,this.key=t.key,this.alias=t.alias,this.url=t.url,this.pathName=t.pathName,this.isNested=t.alias.indexOf(".")>=0}function o(t,e){if(t instanceof s)return u.pick(t,["path","id","key","alias","pathName","url"]);"string"==typeof t&&(t={key:t});var i=t.key.split("."),r=e.getPath(i[0]);return{pathName:i[0],id:i[1],key:t.key,alias:t.alias||i[1],path:r,url:r?r.url()+"/"+i[1]:null}}function a(t,e,i){if(null!==i){if(e.indexOf(".")>0){for(var r,n=e.split(".").reverse();n.length>1&&(r=n.pop());)t=t[r]=u.has(t,r)?t[r]:{};e=n.pop()}t[e]=i}}function h(t,e){var i=e;if(!u.isObject(t))return u.undef;var r=t[e];if(e.indexOf(".")>0){var n=e.split(".").reverse();for(r=t;n.length;)i=n.pop(),r=u.isObject(r)&&r.hasOwnProperty(i)?r[i]:u.undef}return r}var u=t("../../common"),c=t("./PathManager");r.prototype={add:function(t){var e=new s(o(t,this.pathMgr));if(this.fields.hasOwnProperty(e.alias))throw new Error("Duplicate field alias "+e.alias+"("+e.key+")");if(null===e.path)throw new Error("Invalid path specified for field "+e.key+"; it was not in the paths provided, which are : "+this.pathMgr.getPathNames().join(","));var i=e.path.getDependency();if(null!==i&&null===n(this.fields,i))throw new Error("Dynamic paths must reference a field declared in the map. Please add "+r.key(i.path,i.field)+" to the select() criteria before using it in a dynamic field");this.fields[e.alias]=e,this.length++},forEach:function(t,e){return u.find(this.fields,t,e)!==u.undef},getField:function(t){return this.fields[t]||null},getPath:function(t){return this.getPathManager().getPath(t)},getPathManager:function(){return this.pathMgr},pathFor:function(t){var e=this.getField(t);return e?e.path:this.pathMgr.first()},fieldsFor:function(t){return u.filter(u.toArray(this.fields),function(e){return e.pathName===t})},aliasFor:function(t){var e=u.find(this.fields,function(e){return e.url===t},this);return e?e.alias:null},extractData:function(t,e){var i={},r=this.pathMgr.getPathName(t.ref.toString());if(null===r&&null!==t.ref.parent){var n=this.pathMgr.getPathFor(t.ref.parent.toString());n&&n.hasDependency()&&(r=n.name())}var s=e?"exportVal":"val";return u.each(this.fieldsFor(r),function(e){switch(e.id){case"$key":a(i,e.alias,t.key);break;case"$value":a(i,e.alias,t[s]());break;default:t.hasChild(e.id)&&a(i,e.alias,t.child(e.id)[s]())}}),i},snapFor:function(t,e){var i,r=this.pathFor(e);if(!r)return null;var s=r.getDependency();if(null!==s){var o=n(this.fields,s),a=this.snapFor(t,o.alias);a&&(i="$key"===s.field?r.child(a.key).url():"$value"===s.field?r.child(a.val()).url():r.child(a.child(s.field).val()).url())}else i=r.url();return i?u.find(t,function(t){return t.ref.toString()===i})||null:null},denest:function(t){var e={};return u.each(this.getPathManager().getPaths(),function(t){e[t.name()]={path:t,data:{}}}),this.forEach(function(i){var r=h(t,i.alias);if(r!==u.undef)switch(i.id){case"$value":e[i.pathName].data=r;break;case"$key":break;default:e[i.pathName].data[i.id]=r}}),e},idFor:function(t){var e=this.getField(t);return e?e.id:t}},r.key=function(t,e){return"string"!=typeof t&&(t=t.name()),t+"."+e},r.fieldMap=function(t,e){var i,n=t.getField(e);n?(i=n.path,"$value"!==n.id&&(i=i.child(n.id))):i=t.pathFor(e).child(e);var s=new c([i]),o=new r(s);return o.add({key:r.key(i,"$value"),alias:e}),o},r.recordMap=function(t,e){var i=t.getPathManager(),n=u.map(i.getPaths(),function(t){return t.normChild(e)}),s=new r(new c(n));return t.forEach(function(t){s.add({key:t.key,alias:t.alias})}),s},e.exports=r},{"../../common":25,"./PathManager":10}],5:[function(t,e,i){"use strict";function r(){this.criteria=[],s.each(arguments,this.add,this)}function n(t){this.match=t}var s=t("../../common");r.prototype={add:function(t){this.criteria.push(new n(t))},test:function(t,e,i){return s.contains(this.criteria,function(r){return!r.test(t,e,i)})===!1}},n.prototype.test=function(t,e,i){return this.match(t,e,i)===!0},e.exports=r},{"../../common":25}],6:[function(t,e,i){"use strict";function r(t){n(arguments),this.pathMgr=new u(h.toArray(arguments)),this.map=new l(this.pathMgr),this.filters=new c,this.finalized=!1}function n(t){function e(t){return h.isArray(t)&&(t=t[0]),!h.isFirebaseRef(t)}if(t.length<1)throw new Error("Must provide at least one path definition");if(h.contains(t,e))throw new Error("Each argument to the NormalizedCollection constructor must be a valid Firebase reference or an Array containing a Firebase ref as the first argument")}function s(t,e){if(t.finalized)throw new Error("Cannot call "+e+"() after ref has been accessed")}function o(t){var e=[],i=[],r="";return h.each(t.pathMgr.getPaths(),function(t){var i=t.getDependency();e.push(h.printf('\t"%s%s"%s',t.url(),t.id()===t.name()?"":" as "+t.name(),i?"-> "+i.path+"."+i.field:""))}),t.map.forEach(function(t){i.push(h.printf('"%s%s"',t.key,t.alias===t.id?"":" as "+t.alias)),i.length%5===0&&i.push("\n")}),t.filters.criteria.length>0&&(r=h.printf("<%s filters applied>",t.filters.criteria.length)),h.printf("NormalizedCollection(\n%s\n).select(%s)%s.ref",e.join("\n"),i.join(", "),r)}function a(t){var e;if(e="string"==typeof t?t:h.has(t,"key")?t.key:h.undef,"string"!=typeof e||e.indexOf(".")<=0)throw new Error('Each field passed to NormalizedCollection.select() must either be a string in the format "pathAlias.fieldId", or an object in the format {key: "pathAlias.fieldId", alias: "any_name_for_field"}, but I received '+JSON.stringify(t))}var h=t("../../common"),u=t("./PathManager"),c=t("./Filter"),l=t("./FieldMap"),f=t("./NormalizedRef"),d=t("./RecordSet");r.prototype={select:function(t){s(this,"select");var e=h.args("NormalizedCollection.select",arguments,1);return h.each(e.restAsList(0,["string","object"]),function(t){a(t),this.map.add(t)},this),this},filter:function(t){s(this,"filter");var e=h.args("NormalizedCollection.filter",arguments,1,1);return this.filters.add(e.nextReq("function")),this},ref:function(){if(!this.map.length)throw new Error("Must call select() with at least one field before creating a ref");this.finalized=!0,h.log.isInfoEnabled()&&h.log.info("NormalizedRef created using %s",o(this));var t=new d(this.map,this.filters);return new f(t)}},e.exports=r},{"../../common":25,"./FieldMap":4,"./Filter":5,"./NormalizedRef":7,"./PathManager":10,"./RecordSet":14}],7:[function(t,e,i){"use strict";function r(t,e){this._super(this,t),this._parent=e||null,this._key=t.getName(),this._toString=t.getUrl(),this.parent=this._parent,this.key=this._key;for(var i=this;null!==i.parent;)i=i.parent;this.root=i}function n(t){return function(){var e=a.toArray(arguments);a.each(this.$getPaths(),function(i){var r=i.ref;r[t].apply(r,e)})}}function s(t){return function(){var e=a.toArray(arguments),i=this.$getMaster();return i[t].apply(i,e)}}function o(t){return function(){throw new Error(t+" is not supported for NormalizedCollection references. Try calling it on the original reference used to create the NormalizedCollection instead.")}}var a=t("../../common"),h=t("./Query");a.inherits(r,h,{child:function(t){for(var e=t.split("/").reverse(),i=this,n=this;e.length;){var s=e.pop();n=new r(n.$getRecord().makeChild(s),i),i=n}return n},name:function(){return console.warn("The name() function has been deprecated. Use key instead."),this.key},toString:function(){return this._toString},set:function(t,e,i){this.$getRecord().saveData(t,{callback:e,context:i,isUpdate:!1})},update:function(t,e,i){this.$getRecord().saveData(t,{callback:e,context:i,isUpdate:!0})},remove:function(t,e){this.$getRecord().saveData(null,{callback:t,context:e,isUpdate:!1})},push:function(t,e,i){var r=this.$getMaster().push().key,n=this.child(r);return arguments.length&&n.set.apply(n,arguments),n},setWithPriority:function(t,e,i,r){this.$getRecord().saveData(t,{callback:i,context:r,isUpdate:!1,priority:e})},setPriority:function(t,e,i){this.$getMaster().setPriority(t,e,i)},auth:s("auth"),unauth:s("unauth"),authWithCustomToken:s("authWithCustomToken"),authAnonymously:s("authAnonymously"),authWithPassword:s("authWithPassword"),authWithOAuthPopup:s("authWithOAuthPopup"),authWithOAuthRedirect:s("authWithOAuthRedirect"),authWithOAuthToken:s("authWithOAuthToken"),getAuth:s("getAuth"),onAuth:s("onAuth"),offAuth:s("offAuth"),createUser:s("createUser"),changePassword:s("changePassword"),removeUser:s("removeUser"),resetPassword:s("resetPassword"),changeEmail:s("changeEmail"),goOffline:n("goOffline"),goOnline:n("goOnline"),transaction:o("transaction"),onDisconnect:o("onDisconnect")}),e.exports=r},{"../../common":25,"./Query":11}],8:[function(t,e,i){"use strict";function r(t,e){if(this._ref=t,this._rec=t.$getRecord(),!n.isArray(e))throw new Error("Must provide an array of snapshots to merge");this._pri=this._rec.getPriority(e),this._snaps=e,this.key=this._rec.getName(),this.ref=this._ref.ref}var n=t("../../common");r.prototype={val:function(){return this._snaps.length?this._rec.mergeData(this._snaps,!1):null},child:function(t){var e,i=t.split("/").reverse(),n=i.pop();for(e=new r(this._ref.child(n),this._rec.getChildSnaps(this._snaps,n));i.length;)e=e.child(i.pop());return e},forEach:function(t,e){return this._rec.forEachKey(this._snaps,function(i,r){return"$value"!==i&&"$key"!==i&&t.call(e,this.child(r))},this)},hasChild:function(t){for(var e=t.split("/").reverse(),i=e.length>0,r=this._ref,n=this;i&&e.length;){var s=e.pop();i=r.$getRecord().hasChild(n._snaps,s),i&&e.length&&(r=r.child(s),n=n.child(s))}return i},hasChildren:function(){return this._rec.forEachKey(this._snaps,function(t){return"$key"!==t&&"$value"!==t})},name:function(){return console.warn("name() has been deprecated. Use key instead."),this.key},numChildren:function(){var t=0;return this._rec.forEachKey(this._snaps,function(e){"$key"!==e&&"$value"!==e&&t++}),t},getPriority:function(){return this._pri},exportVal:function(){return this._rec.mergeData(this._snaps,!0)},exists:function(){return null!==this.val()}},e.exports=r},{"../../common":25}],9:[function(t,e,i){"use strict";function r(t,e){var i=n(t);this._ref=i.ref,this._alias=i.alias,this._dep=i.dep,this._parent=e||null,this.ref=this._ref,this.reff=this._ref.ref,this.parent=this._parent}function n(t){var e,i,r=null;return o.isArray(t)?(e=t[0],i=t[1],r=t[2]):e=o.isObject(t.ref)?t.ref:t,{ref:e,alias:i||e.key,dep:s(r)}}function s(t){if(o.isObject(t))return t;if(t){var e=t.split(".");return{path:e[0],field:e[1]}}return null}var o=t("../../common");r.prototype={child:function(t){return new r(this.reff.child(t),this)},normChild:function(t){var e=this.getDependency();return null!==e?new r([this.reff,this.name(),e.path+"."+e.field],this):new r([this.reff.child(t),this.name()],this)},hasDependency:function(){return null!==this._dep},getDependency:function(){return this._dep},url:function(){return this.reff.toString()},name:function(){return this._alias},id:function(){return this.reff.key},clone:function(){return new r([this._ref,this._alias,this._dep],this._parent)}},e.exports=r},{"../../common":25}],10:[function(t,e,i){"use strict";function r(t){this.paths=[],this.pathsByUrl={},this.deps={},this.pathNames=[],o.each(t,this.add,this)}function n(t,e){return o.map(t,function(t){return e[t].path+"."+e[t].field}).join(" >> ")}var s=t("./Path"),o=t("../../common");r.prototype={add:function(t){var e=t instanceof s?t.clone():new s(t);if(!this.paths.length&&e.hasDependency())throw new Error("The master path (i.e. the first) may not declare a dependency. Perhaps you have put the wrong path first in the list?");if(o.has(this.pathsByUrl,e.url()))throw new Error("Duplicate path: "+e.url());if(o.contains(this.pathNames,e.name()))throw new Error("Duplicate path name. The .key() value for each path must be unique, or you can give each a path an alias by using [firebaseRef, alias] in the constructor. The aliases must also be unique.");this._map(e),this.paths.push(e),this.pathsByUrl[e.url()]=e.name(),this.pathNames.push(e.name())},count:function(){return this.paths.length},first:function(){return this.paths[0]},getPath:function(t){return o.find(this.paths,function(e){return e.name()===t})||null},getPathFor:function(t){var e=this.getPathName(t);return e?this.getPath(e):null},getPaths:function(){return this.paths.slice()},getPathName:function(t){return this.pathsByUrl[t]||null},getPathNames:function(){return this.pathNames.slice()},getUrls:function(){return o.keys(this.pathsByUrl)},getDependencyGraph:function(){return o.extend(!0,this.deps)},_map:function(t){var e=this.first(),i=t.getDependency();!i&&e&&(i={path:e.name(),field:"$key"}),i&&(this.deps[t.name()]=i,this._assertNotCircularDep(t.name()))},_assertNotCircularDep:function(t){for(var e=[t],i=this.deps[t];o.isDefined(i);){var r=i.path;if(o.contains(e,r))throw e.push(r),new Error("Circular dependencies in paths: "+n(e,this.deps));e.push(r),i=o.val(this.deps,r)}}},e.exports=r},{"../../common":25,"./Path":9}],11:[function(t,e,i){"use strict";function r(t,e){var i=this;i._ref=t,i._rec=e,e&&e.setRef(i),i.ref=i._ref}var n=t("../../common"),s=t("./Transmogrifier");r.prototype={on:function(t,e,i,r){function s(t){"function"==typeof i&&null!==t&&i.call(r,t)}return 3===arguments.length&&n.isObject(i)&&(r=i,i=n.undef),this.$getRecord().watch(t,e,s,r),e},once:function(t,e,i,r){function s(i){a.off(t,s),e.call(r,i)}function o(t){"function"==typeof i&&null!==t&&i.call(r,t)}var a=this;return 3===arguments.length&&n.isObject(i)&&(r=i,i=n.undef),this.on(t,s,o)},off:function(t,e,i){this.$getRecord().unwatch(t,e,i)},orderByChild:function(){return this.$replicate("orderByChild",n.toArray(arguments))},orderByKey:function(){return this.$replicate("orderByKey",n.toArray(arguments))},orderByValue:function(){return this.$replicate("orderByValue",n.toArray(arguments))},orderByPriority:function(){return this.$replicate("orderByPriority",n.toArray(arguments))},limitToFirst:function(){return this.$replicate("limitToFirst",n.toArray(arguments))},limitToLast:function(){return this.$replicate("limitToLast",n.toArray(arguments))},limit:function(){return this.$replicate("limit",n.toArray(arguments))},startAt:function(){return this.$replicate("startAt",n.toArray(arguments))},endAt:function(){return this.$replicate("endAt",n.toArray(arguments))},equalTo:function(){return this.$replicate("equalTo",n.toArray(arguments))},$getRecord:function(){return this._rec},$getMaster:function(){return this._rec.getPathManager().first().ref},$getPaths:function(){return this._rec.getPathManager().getPaths()},$replicate:function(t,e){var i=this.$getRecord(),n=this.$getMaster();return n=n[t].apply(n,e),new r(this._ref,s.replicate(i,n))}},n.registerFirebaseWrapper(r),e.exports=r},{"../../common":25,"./Transmogrifier":17}],12:[function(t,e,i){"use strict";function r(t){var e=t.getPathManager().first().id(),i=f.mergeToString(t.getPathManager().getUrls());this._super(t,e,i),this._eventManagers={},f.log.debug("Record created",this.getName(),this.getUrl())}function n(t){this.rec=t,this.pm=t.getPathManager(),this.running=!1,this._init()}function s(t,e){this.event=t,this.rec=e,this.map=e.getFieldMap(),this.pm=e.getPathManager(),this.subs=[],this.dyno=null}function o(t,e,i,r){var n=t.getDependency(),s=e.getPath(n.path),o=s.ref;if("$key"===n.field)throw new Error("Dynamic paths do not support $key (you should probably just join on this path)");"$value"!==n.field&&(o=o.child(n.field));var a,h=o.on("value",function(e){a&&a.key!==e.val()&&(f.log.debug("Record.Dyno: stopped monitoring %s",a.toString()),a.off(i,r),r(null)),null!==e.val()&&(a=t.ref.child(e.val()),a.on(i,r),f.log("Record.Dyno: monitoring %s",a.toString()))});this.dispose=function(){o.off("value",h),a&&a.off(i,r)}}function a(t,e,i){f.each(t.fieldsFor(e.name()),function(t){switch(t.id){case"$key":break;case"$value":f.has(i,".value")||(i[".value"]=null);break;default:f.has(i,t.id)||(i[t.id]=null)}})}var h=t("./FieldMap"),u=t("./RecordField"),c=t("./AbstractRecord"),l=t("./SnapshotFactory"),f=t("../../common");f.inherits(r,c,{makeChild:function(t){var e=h.fieldMap(this.getFieldMap(),t);return new u(e)},hasChild:function(t,e){var i=this.getFieldMap().getField(e);if(!i)return!1;var r=this.getFieldMap().snapFor(t,e);return null!==r&&r.hasChild(e)},getChildSnaps:function(t,e){var i,r=this.getFieldMap().snapFor(t,e),n=this.getFieldMap().getField(e);if(n)switch(n.id){case"$key":throw new Error("Cannot get child snapshot from key (not a real child element)");case"$value":i=r;break;default:i=r.child(n.id)}else i=r.child(e);return[i]},forEachKey:function(t,e,i){function r(t,e){switch(e){case"$key":return!0;case"$value":return t&&null!==t.val();default:return t&&t.hasChild(e)}}var n=this.getFieldMap();return n.forEach(function(s){var o=n.snapFor(t,s.alias);return!!r(o,s.id)&&e.call(i,s.id,s.alias)===!0})},mergeData:function(t,e){var i=null,r=this.getFieldMap();return t.length>0&&null!==t[0].val()&&(i=f.extend.apply(null,f.map(t,function(t){return r.extractData(t,e)})),e&&null!==i&&null!==t[0].getPriority()&&(f.isObject(i)||(i={".value":i}),i[".priority"]=t[0].getPriority())),i},getPriority:function(t){return t[0].getPriority()},getClass:function(){return r},saveData:function(t,e){var i=f.queue(),r=this.getFieldMap(),n=this.getPathManager().getPaths();if(e.isUpdate&&!f.isObject(t))throw new Error("First argument to update() command must be an object");if(null===t)f.each(n,function(t){t.hasDependency()||t.reff.remove(i.getHandler())});else if(f.isObject(t)){var s=r.denest(t);f.each(s,function(t){var o=t.path,h=t.data,u=this._writeRef(s,o);null!==u?f.isEmpty(h)&&e.isUpdate||(f.isObject(h)||(h={".value":h}),e.isUpdate||a(r,o,h),f.isDefined(e.priority)&&(h[".priority"]=e.priority),f.has(h,".value")?u.set(h,i.getHandler()):u.update(h,i.getHandler())):f.log.info("No dynamic key found for master",n[0].ref.toString(),"with dynamic path",o.ref.toString())},this)}else{if(1!==n.length)throw new Error("Cannot set multiple paths to a non-object value. Since this is a NormalizedCollection, the data will be split between the paths. But I can't split a primitive value");f.isDefined(e.priority)?n[0].ref.setWithPriority(t,e.priority,i.getHandler()):n[0].ref.set(t,i.getHandler())}i.handler(e.callback||f.noop,e.context)},getName:function(){return this._name},getUrl:function(){return this._url},_start:function(t){f.has(this._eventManagers,t)||(f.log.debug("Record._start: event=%s, url=%s",t,this.getUrl()),this._eventManagers[t]="value"===t?new n(this):new s(t,this)),this._eventManagers[t].start()},_stop:function(t){f.has(this._eventManagers,t)&&(f.log.debug("Record._stop: event=%s, url=%s",t,this.getUrl()),this._eventManagers[t].stop())},_writeRef:function(t,e){var i=e.reff,r=e.getDependency();if(null!==r){var n=this.getPathManager().getPath(r.path),s=this._depKey(t,n,r.field);i=null===s?null:i.child(s)}return i},_depKey:function(t,e,i){var r,n=t[e.name()].data;switch(i){case"$key":r=e.id();break;case"$value":r=f.has(n,".value")?n[".value"]:f.isEmpty(n)?null:n;break;default:r=f.has(n,i)?n[i]:null}var s=typeof r;if(null!==r&&"string"!==s)throw new Error("Dynamic key values must be a string. Type was "+s+" for "+e.ref.toString()+"->"+i);return r}}),n.prototype={start:function(){this.running||(this.running=!0,f.each(this.pm.getPathNames(),this._startPath,this))},stop:function(){this.running&&(this.running=!1,f.each(this.subs,function(t){t()}),this._init())},update:function(t,e){this.snaps[t]=e,this._checkLoadState(),f.log("Record.ValueEventManager.update: url=%s, loadCompleted=%s",e.ref.toString(),this.loadCompleted),this.loadCompleted&&this.rec.trigger(new l("value",this.rec.getName(),f.toArray(this.snaps)))},_startPath:function(t){var e=this,i=e.pm.getPath(t),r=f.bind(e.update,e,t);if(i.hasDependency()){var n=new o(i,this.rec.getFieldMap(),"value",r);this.subs.push(n.dispose)}else i.ref.on("value",r),e.subs.push(function(){i.ref.off("value",r)})},_checkLoadState:function(){if(!this.loadCompleted){var t=this.snaps,e=this.pm.getPathNames();this.loadCompleted=!f.contains(e,function(e){return!t.hasOwnProperty(e)})}},_init:function(){this.loadCompleted=!1,this.snaps={},this.subs=[]}},s.prototype={start:function(){f.each(this.pm.getPathNames(),function(t){var e=this.event,i=this.pm.getPath(t),r=f.bind(this.update,this);i.hasDependency()?(this.dyno=new o(i,this.map,e,r),this.subs.push(this.dyno.dispose)):(i.ref.on(e,r),this.subs.push(function(){i.ref.off(e,r)}))},this)},stop:function(){f.each(this.subs,function(t){t()}),this.subs=[]},update:function(t,e){null!==t&&null!==this.map.aliasFor(t.ref.toString())&&(f.log("Record.ChildEventManager.update: event=%s, key=%s/%s",this.event,t.ref.parent.key,t.key),this.rec.trigger(new l(this.event,t.key,t,e)))}},e.exports=r},{"../../common":25,"./AbstractRecord":3,"./FieldMap":4,"./RecordField":13,"./SnapshotFactory":16}],13:[function(t,e,i){"use strict";function r(t){if(this.handlers={},this.path=t.getPathManager().first(),this._super(t,this.path.name(),this.path.url()),1!==t.getPathManager().count())throw new Error("RecordField must have exactly one path, but we got "+t.getPathManager().count());if(1!==t.length)throw new Error("RecordField must have exactly one field, but we found "+t.length);u.log.debug("RecordField created",this.getName(),this.getUrl())}function n(t){return t.callback?function(){t.callback.apply(t.context,arguments)}:u.noop}var s=t("./PathManager"),o=t("./FieldMap"),a=t("./AbstractRecord"),h=t("./SnapshotFactory"),u=t("../../common");u.inherits(r,a,{makeChild:function(t){var e=new s([this.path.child(t)]),i=new o(e);return i.add({key:o.key(e.first(),"$value"),alias:t}),new r(i)},hasChild:function(t,e){return t[0].hasChild(e)},getChildSnaps:function(t,e){return[t[0].child(e)]},mergeData:function(t,e){return e?t[0].exportVal():t[0].val()},getPriority:function(t){return t[0].getPriority()},forEachKey:function(t,e,i){var r=t[0];return r.forEach(function(t){e.call(i,t.key,t.key)})},saveData:function(t,e){var i=this.path.ref;if(e.isUpdate){if(!u.isObject(t))throw new Error("When using update(), the data must be an object.");u.has(e,"priority")&&(t[".priority"]=e.priority),i.update(t,n(e))}else u.has(e,"priority")?i.setWithPriority(t,e.priority,n(e)):i.set(t,n(e))},getClass:function(){return r},_start:function(t){var e=this;this.handlers[t]=function(i,r){e.trigger(new h(t,i.key,i,r))},this.path.ref.on(t,this.handlers[t],this._cancel,this)},_stop:function(t){this.handlers.hasOwnProperty(t)&&this.path.ref.off(t,this.handlers[t],this)}}),e.exports=r},{"../../common":25,"./AbstractRecord":3,"./FieldMap":4,"./PathManager":10,"./SnapshotFactory":16}],14:[function(t,e,i){"use strict";function r(t,e){var i=o.mergeToString(t.getPathManager().getPathNames()),r=o.mergeToString(t.getPathManager().getUrls());this._super(t,i,r),this.filters=e,this.monitor=new h(this)}var n=t("./Record"),s=t("./AbstractRecord"),o=t("../../common"),a=t("./FieldMap"),h=t("./RecordSetEventManager");o.inherits(r,s,{makeChild:function(t){var e=a.recordMap(this.getFieldMap(),t);return new n(e)},hasChild:function(t,e){return o.contains(t,function(t){return t.key()===e})},getChildSnaps:function(t,e){return o.filter(t,function(t){return t.key()===e})},mergeData:function(t,e){var i=this,r=null;return t.length&&null!==t[0].val()&&(r={},o.each(t,function(t){null!==t.val()&&i.filters.test(t.val(),t.key,t.getPriority())&&(r[t.key]=e?t.exportVal():t.val())})),r},getPriority:function(){return null},forEachKey:function(t,e,i){t.forEach(function(t){return e.call(i,t.key,t.key)})},getClass:function(){return r},saveData:function(t,e){var i=o.queue();if(null===t)o.each(this.getPathManager().getPaths(),function(t){t.ref.remove(i.getHandler())});else{if(!o.isObject(t))throw new Error("Calls to set() or update() on a NormalizedCollection must pass either null or an object value. There is no way to split a primitive value between the paths");o.each(t,function(t,r){if(".value"===r||".priority"===r)throw new Error("Cannot use .priority or .value on the root path of a NormalizedCollection. You probably meant to sort the records anyway (i.e. one level lower).");this.child(r).saveData(t,{isUpdate:e.isUpdate,callback:i.getHandler()})},this),e.priority&&this.getPathManager().first().ref.setPriority(e.priority,i.getHandler())}i.handler(e.callback||o.noop,e.context)},_getChildKey:function(t,e,i){var r=i,n=this.getPathManager().getPathFor(t.ref.toString());if(n.hasDependency()){var s=n.getDependency(),a=this.getFieldMap().getPath(s.path);if(!a)throw new Error("Invalid dependency path. "+t.ref.toString()+" depends on "+s.path+", but that alias does not exist in the paths provided.");var h=o.find(e,function(t){return t.ref.toString()===a.url()});h?(h=h.child(i),"$value"!==s.field&&(h=h.child(s.field)),r=h.val()):r=null}return r},_start:function(){this.monitor.start()},_stop:function(t,e){0===e&&this.monitor.stop()}}),e.exports=r},{"../../common":25,"./AbstractRecord":3,"./FieldMap":4,"./Record":12,"./RecordSetEventManager":15}],15:[function(t,e,i){"use strict";function r(t){var e=t.getPathManager();this.masterRef=e.first().ref,this.url=this.masterRef.toString(),this.recList=new n(t,this.url),this.running=!1}function n(t,e){this.obs=t,this.url=e,this._reset()}var s=t("./SnapshotFactory"),o=t("../../common");r.prototype={start:function(){return this.running||(o.log("RecordSetEventManager: Loading normalized records from master list %s",this.url),this.running=!0,this.masterRef.on("child_added",this._add,this),this.masterRef.on("child_removed",this._remove,this),this.masterRef.on("child_moved",this._move,this),this.masterRef.once("value",this.recList.masterPathLoaded,this.recList)),this},stop:function(){return this.running&&(o.log("RecordSetEventManager: Stopped monitoring master list %s",this.url),this.running=!1,this.masterRef.off("child_added",this._add,this),this.masterRef.off("child_removed",this._remove,this),this.masterRef.off("child_moved",this._move,this),this.recList.unloaded()),this},_add:function(t,e){this.recList.add(t.key,e)},_remove:function(t){this.recList.remove(t.key)},_move:function(t,e){this.recList.move(t.key,e)}},n.prototype={add:function(t,e){o.log.debug("RecordList.add: key=%s, prevChild=%s",t,e);var i=this.obs.child(t),r=o.bind(this._valueUpdated,this,t);this.loading[t]={rec:i,prev:e,fn:r,unwatch:function(){i.unwatch("value",r)}},this.loadComplete||this.initialKeysLeft.push(t),i.watch("value",r)},remove:function(t){o.log.debug("RecordList.remove: key=%s",t);var e=this._dropRecord(t);null!==e&&this._notify("child_removed",t,e)},move:function(t,e){if(o.has(this.recs,t)){var i=o.indexOf(this.recIds,t);this.recIds.splice(i,1),this._putAfter(t,e),this._notify("child_moved",t)}},masterPathLoaded:function(){o.log.debug("RecordList: Initial data has been loaded from master list at %s",this.url),this.masterLoaded=!0,this._checkLoadState()&&this._notifyValue()},unloaded:function(){this._reset()},findKey:function(t){return o.indexOf(this.recIds,t)},_reset:function(){o.each(this.recs,function(t,e){this.remove(e)},this),o.each(this.filtered,function(t,e){this._dropRecord(e)},this),o.each(this.loading,function(t,e){this._dropRecord(e)},this),this.recs={},this.recIds=[],this.snaps={},this.loading={},this.filtered={},this.loadComplete=!1,this.initialKeysLeft=[],this.masterLoaded=!1},_valueUpdated:function(t,e){var i;this.snaps[t]=e,o.has(this.loading,t)?(i=this.loading[t],delete this.loading[t],this._processAdd(e,i)):o.has(this.recs,t)?(i=this.recs[t],this._processChange(e,i)):o.has(this.filtered,t)?null!==e.val()&&this.obs.filters.test(e.val(),t,e.getPriority())&&(i=this.filtered[t],delete this.filtered[t],o.log("RecordList: Unfiltered key %s",t),this._processAdd(e,i)):o.log("RecordList: Orphan key %s ignored. Probably a concurrent edit.",t)},_processAdd:function(t,e){var i=t.key;this.obs.filters.test(t.val(),i,t.getPriority())?(this.recs[i]=e,this._putAfter(i,e.prev),this._notify("child_added",i)):(o.log("RecordList: Filtered key %s",i),this.filtered[i]=e),this._checkLoadState(i)&&this._notifyValue()},_processChange:function(t,e){if(null!==t.val()){var i=t.key;this.obs.filters.test(t.val(),i,t.getPriority())?this._notify("child_changed",i):(delete this.recs[i],this.filtered[i]=e,this._notify("child_removed",i,this.snaps[i]))}},_notify:function(t,e,i){var r;"child_added"!==t&&"child_moved"!==t||(r=this._getPrevChild(e)),o.log("RecordList._notify: event=%s, key=%s, prev=%s",t,e,r);var n=new s(t,e,i||this.snaps[e],r);this.obs.trigger(n),this._notifyValue()},_notifyValue:function(){if(this.loadComplete){o.log.debug("RecordList._notifyValue: snap_keys=%s",o.keys(this.snaps));var t=new s("value",null,o.toArray(this.snaps));this.obs.trigger(t)}},_getPrevChild:function(t){if(!this.recIds.length)return null;var e=this.findKey(t);return e===-1?this.recIds[this.recIds.length-1]:0===e?null:this.recIds[e-1]},_posFor:function(t){var e,i;return null===t?e=0:(i=this.findKey(t),e=i===-1?this.recIds.length:i+1),e},_putAfter:function(t,e){var i=this._posFor(e);this.recIds.splice(i,0,t)},_dropRecord:function(t){var e=null;return this.recs[t]&&(e=this.snaps[t],this.recs[t].unwatch()),this.loading[t]&&this.loading[t].unwatch(),o.has(this.filtered,t)&&this.filtered[t].unwatch(),delete this.loading[t],delete this.snaps[t],delete this.filtered[t],delete this.recs[t],o.remove(this.recIds,t),e},_checkLoadState:function(t){return!(this.loadComplete||(t&&o.remove(this.initialKeysLeft,t),this.initialKeysLeft.length||!this.masterLoaded))&&(this.loadComplete=!0,!0)}},e.exports=r},{"../../common":25,"./SnapshotFactory":16}],16:[function(t,e,i){"use strict";function r(t,e,i,r){this.event=t,this.key=e,this.snaps=s(i),this.prevChild=r,n(this)}function n(t){switch(t.event){case"value":break;case"child_added":
case"child_moved":if("string"!=typeof t.key||!t.key)throw new Error("Invalid trigger key "+t.key);if(t.prevChild===o.undef)throw new Error("Triggers must provide a valid prevChild value for child_added and child_moved events");break;case"child_removed":case"child_changed":if("string"!=typeof t.key||!t.key)throw new Error("Invalid trigger key "+t.key);break;default:throw new Error("Invalid trigger event type: "+t.event)}}function s(t){return t instanceof a?t._snaps.slice():o.isArray(t)?t.slice():[t]}var o=t("../../common"),a=t("./NormalizedSnapshot.js");r.prototype.create=function(t){var e;return e="value"===this.event?new a(t,this.snaps):new a(t.ref.child(this.key),this.snaps)},r.prototype.toString=function(){return o.printf("SnapshotFactory(event=%s, key=%s, numberOfSnapshots=%s, prevChild=%s",this.event,this.key,this.snaps.length,this.prevChild===o.undef?"undefined":this.prevChild)},e.exports=r},{"../../common":25,"./NormalizedSnapshot.js":8}],17:[function(t,e,i){"use strict";var r=t("../../common"),n=t("./PathManager"),s=t("./Path"),o=t("./FieldMap"),a=t("./RecordSet");e.exports={replicate:function(t,e){var i=t.getPathManager().getPaths().slice(0),h=i[0];i[0]=new s([e,h.name(),h.getDependency()]);var u=new n(r.map(i,function(t){return t.clone()})),c=new o(u);t.getFieldMap().forEach(c.add,c);var l,f=t.getClass();return l=f===a?new f(c,t.filters):new f(c)}}},{"../../common":25,"./FieldMap":4,"./Path":9,"./PathManager":10,"./RecordSet":14}],18:[function(t,e,i){"use strict";function r(t,e,i){var r=s.extend({},u,t);return r.maxCacheSize||(r.maxCacheSize=3*r[e]),n(r,e,i),n(r,"maxCacheSize",i),r}function n(t,e,i){if("number"!=typeof t[e])throw new Error("Argument "+e+" passed into opts for "+i+"must be a number")}var s=t("../common"),o=t("./libs/Scroll.js"),a=t("./libs/Paginate.js"),h=t("./libs/ReadOnlyRef.js"),u={field:null,pageSize:10,windowSize:250};i.Scroll=function(t,e,i){if(!s.isFirebaseRef(t)||s.isQueryRef(t))throw new Error("First argument to Firebase.util.Scroll must be a valid Firebase ref. It cannot be a Query (e.g. you have called orderByChild()).");if("string"!=typeof e)throw new Error("Second argument to Firebase.util.Scroll must be a valid string");if(arguments.length>2&&!s.isObject(i))throw new Error("Optional third argument to Firebase.util.Scroll must be an object of key/value pairs");var n=new h(t);return n.scroll=new o(n,e,r(i,"windowSize","Scroll")),n},i.Paginate=function(t,e,i){if(!s.isFirebaseRef(t)||s.isQueryRef(t))throw new Error("First argument to Firebase.util.Paginate must be a valid Firebase ref. It cannot be a Query (e.g. you have called orderByChild()).");if("string"!=typeof e)throw new Error("Second argument to Firebase.util.Paginate must be a valid string");if(arguments.length>2&&!s.isObject(i))throw new Error("Optional third argument to Firebase.util.Paginate must be an object of key/value pairs");var n=new h(t);return n.page=new a(n,e,r(i,"pageSize","Paginate")),n}},{"../common":25,"./libs/Paginate.js":21,"./libs/ReadOnlyRef.js":22,"./libs/Scroll.js":23}],19:[function(t,e,i){"use strict";function r(t,e,i){n.log.debug("Cache: caching %s using field=%s maxRecordsLoaded=%d",t.toString(),e,i),this.offset=new s({field:e,max:i,ref:t.ref}),this.outRef=t,this.inRef=null,this.queryRef=null,this.countRef=null,this.keys={},this.start=0,this.count=-1,this.endCount=-1,this.nextListeners=[],this.offset.observe(this._keyChange,this)}var n=t("../../common"),s=t("./Offset");r.prototype.moveTo=function(t,e){n.log.debug("Cache.moveTo: startOffset=%d, numberOfRecords=%d",t,e);var i=this.start,r=this.count;this.start=t,this.count=e,this.endCount=this.start+this.count,i!==this.start?this.offset.goTo(t,e):r!==this.count&&this._refChange()},r.prototype.hasNext=function(){return this.count===-1||this.endCount>this.start+this.count},r.prototype.hasPrev=function(){return this.start>0},r.prototype.observeHasNext=function(t,e){var i=this.nextListeners,r=[t,e];return i.push(r),function(){n.remove(i,r)}},r.prototype.destroy=function(){this._unsubscribe(),this.offset.destroy(),this.offset=null,this.start=0,this.count=-1,this.inRef=null,this.outRef=null,this.queryRef=null,this.countRef=null,this.keys=null,this.nextListeners=null},r.prototype._keyChange=function(t,e,i){this.inRef=i,n.log.debug("Cache._keyChange: %s %s %s",t,e,i.toString()),this._refChange()},r.prototype._unsubscribe=function(){this.queryRef&&(this.queryRef.off("child_added",this._add,this),this.queryRef.off("child_removed",this._remove,this),this.queryRef.off("child_moved",this._move,this),this.queryRef.off("child_changed",this._change,this),this.queryRef.off("value",this._value,this),this.queryRef.off("value",this._removeOrphans,this),this.queryRef=null),this.countRef&&(this.countRef.off("value",this._count,this),this.countRef=null)},r.prototype._refChange=function(){this._unsubscribe(),this.inRef&&this.count>-1&&(this.countRef=this.inRef.limitToFirst(this.count+1),this.countRef.on("value",this._count,this),this.queryRef=this.inRef.limitToFirst(this.count),this.queryRef.on("child_added",this._add,this),this.queryRef.on("child_removed",this._remove,this),this.queryRef.on("child_moved",this._move,this),this.queryRef.on("child_changed",this._change,this),this.queryRef.on("value",this._value,this),this.queryRef.once("value",this._removeOrphans,this))},r.prototype._add=function(t,e){var i=t.key;n.has(this.keys,i)?n.isEqual(this.keys[i],t.val())||this._change(t):(this.keys[i]=t,this.outRef.$trigger("child_added",t,e))},r.prototype._remove=function(t){var e=t.key;n.has(this.keys,e)&&(this.outRef.$trigger("child_removed",t),delete this.keys[e])},r.prototype._move=function(t,e){var i=t.key;n.has(this.keys,i)&&(this.keys[i]=t,this.outRef.$trigger("child_moved",t,e))},r.prototype._change=function(t){this.keys[t.key]=t,this.outRef.$trigger("child_changed",t)},r.prototype._value=function(t){this.outRef.$trigger("value",t)},r.prototype._count=function(t){this.endCount=this.start+t.numChildren();var e=this.hasNext();n.each(this.nextListeners,function(t){t[0].call(t[1],e)})},r.prototype._removeOrphans=function(t){n.each(this.keys,function(e,i){t.hasChild(i)||(this.outRef.$trigger("child_removed",e),delete this.keys[i])},this)},e.exports=r},{"../../common":25,"./Offset":20}],20:[function(t,e,i){"use strict";function r(t){this.keys=[],this.field=t.field,this.ref=o(t.ref,t.field),this.max=t.max,this.listeners=[],this.curr=0,this.sub=null,this.isSubscribing=!1,this.lastNotifyValue=u.undef,this._debouncedRecache=a(function(){u.log.debug("Offset._debouncedRecache: recaching keys for offset %d",this.curr),this.keys=[],this._grow(this._listen)},this,100,1e3)}function n(t,e){var i;switch(e){case"$key":i=t.key;break;case"$priority":i=t.getPriority();break;case"$value":i=t.val();break;default:var r=t.val();if(!u.isObject(r))throw new Error("A value of type "+typeof r+'Was found. But we are attempting to order by child field "'+e+"\". Pagination requires all records to be objects or it can't determine an appropriate offset value.");i=r[e]}return{val:i,key:t.key}}function s(t,e,i){return e===!1?null:null===e?t:"$key"===i?t.startAt(e.key):t.startAt(e.val,e.key)}function o(t,e){return"$key"===e?t.orderByKey():"$priority"===e?t.orderByPriority():"$value"===e?t.orderByValue():t.orderByChild(e)}function a(t,e,i,r){function n(){if(h&&(h(),h=null),a&&Date.now()-a>r)c||(c=!0,setTimeout(s,0));else{a||(a=Date.now());var t=setTimeout(s,i);h=function(){clearTimeout(t)}}}function s(){h=null,a=null,c=!1,t.apply(e,u)}function o(){u=Array.prototype.slice.call(arguments,0),n()}var a,h,u,c;if("number"==typeof e&&(r=i,i=e,e=null),"number"!=typeof i)throw new Error("Must provide a valid integer for wait. Try 0 for a default");if("function"!=typeof t)throw new Error("Must provide a valid function to debounce");return r||(r=10*i||100),o.running=function(){return a>0},o}function h(t){var e=t.length;return e?t[e-1]:null}var u=t("../../common");r.prototype.goTo=function(t){t!==this.curr&&(u.log("Offset.goTo: offset changed from %d to %d",this.curr,t),this.curr=t,this.lastNotifyValue=u.undef,this._listen())},r.prototype.observe=function(t,e){this.listeners.push([t,e]);var i=this.getKey(),r=s(this.ref,i,this.field);t.call(e,i&&i.val,i&&i.key,r)},r.prototype.getKey=function(t){return arguments.length||(t=this.curr),0===t?null:this.keys.length>t&&this.keys[t]},r.prototype.destroy=function(){this._unsubscribe(),this.curr=0,this.keys=[],this.lastNotifyValue=u.undef,this.isSubscribing=!1},r.prototype._notify=function(){var t=this.getKey();if(!u.isEqual(this.lastNotifyValue,t)){u.log("Offset._notify: key at offset %d is %s",this.curr,t&&t.key),this.lastNotifyValue=t;var e=s(this.ref,t,this.field);u.each(this.listeners,function(i){i[0].call(i[1],t&&t.val,t&&t.key,e)})}},r.prototype._recache=function(){this.isSubscribing||this._debouncedRecache()};var c=0;r.prototype._grow=function(t){var e=this,i=e.keys.length;if(e.curr>=i){var r=e.getKey(),s=h(e.keys),o=Math.min(e.curr+(s?2:1)-i,e.max),a=null!==s?e.ref.startAt(s.val,s.key):e.ref;a.limitToFirst(o).once("value",function(i){var a=null!==s;if(i.forEach(function(t){return a?void(a=!1):void e.keys.push(n(t,e.field))}),c++>1e4)throw new Error("Tried to fetch more than 10,000 pages to determine the correct offset. Giving up now. Sorry.");e.curr>=e.keys.length&&i.numChildren()===o?setTimeout(u.bind(e._grow,e,t),0):(c=0,u.log.debug("Offset._grow: Cached %d keys",e.keys.length),t.call(e,!u.isEqual(e.getKey(),r)))})}else t.call(e,!1)},r.prototype._startOffset=function(){return Math.max(0,this.curr-this.max,this.curr-10)},r.prototype._queryRef=function(){var t=this._startOffset(),e=this.ref;if(t>0){var i=this.getKey(t);e=e.startAt(i.val,i.key)}return e.limitToLast(Math.max(this.curr-t,1))},r.prototype._moved=function(t){t.key===this.getKey()&&this._recache()},r.prototype._unsubscribe=function(){this.sub&&(this.sub.off("child_added",this._recache,this),this.sub.off("child_moved",this._moved,this),this.sub.off("child_removed",this._recache,this),this.sub.off("value",this._doneSubscribing,this),this.sub=null)},r.prototype._subscribe=function(){this._unsubscribe(),this.sub=this._queryRef(),this.isSubscribing=!0,this.sub.on("child_added",this._recache,this),this.sub.on("child_moved",this._moved,this),this.sub.on("child_removed",this._recache,this),this.sub.once("value",this._doneSubscribing,this)},r.prototype._doneSubscribing=function(){this.isSubscribing=!1,this._notify()},r.prototype._monitorEmptyOffset=function(){function t(n){var s=n.numChildren();s>(null===r?0:1)&&(u.log.debug("Offset._monitorEmptyOffset: A value exists now."),i.off("value",t),e._grow())}var e=this,i=e.ref,r=null;this.keys.length&&(r=h(this.keys),i=i.startAt(r.val,r.key)),u.log.debug("Offset._monitorEmptyOffset: No value exists at offset %d, currently %d keys at this path. Watching for a new value.",this.curr,this.keys.length),i.limitToFirst(2).on("value",t)},r.prototype._listen=function(){this._unsubscribe(),this.curr>=this.keys.length?this._grow(function(){this.keys.length>=this.curr?this._subscribe():(this._monitorEmptyOffset(),this._notify())}):this._subscribe()},e.exports=r},{"../../common":25}],21:[function(t,e,i){"use strict";function r(t,e,i){this.currPage=0,this.field=e,this.ref=t,this.pageSize=i.pageSize,this.max=i.maxCacheSize,this.subs=[],this.pageChangeListeners=[],this.pageCountListeners=[],this.cache=new a(t,e,i.maxCacheSize),this.pageCount=-1,this.couldHaveMore=!1,this.cache.observeHasNext(this._countPages,this)}function n(t,e){return 0===t?0:Math.ceil(t/e)}function s(t,e){var i={};if(i.bindFunction=function(t,e){return function(){return t.apply(e,[e])}},i.stateChange=function(t){4==i.request.readyState&&i.callbackFunction(i.request.responseText)},i.getRequest=function(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):!!window.XMLHttpRequest&&new XMLHttpRequest},i.postBody=arguments[2]||"",i.callbackFunction=e,i.url=t,i.request=i.getRequest(),i.request){var r=i.request;r.onreadystatechange=i.bindFunction(i.stateChange,i),""!==i.postBody?(r.open("POST",t,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("Connection","close")):r.open("GET",t,!0),r.send(i.postBody)}return i}var o=t("../../common"),a=t("./Cache");r.prototype.next=function(){return this.hasNext()&&(this.currPage++,o.log.debug("Paginate.next: current page is %d",this.currPage),this._pageChange()),this},r.prototype.prev=function(){return this.hasPrev()&&(this.currPage--,o.log.debug("Paginate.prev: current page is %d",this.currPage),this._pageChange()),this},r.prototype.setPage=function(t){t>0&&t<=this.pageCount?(this.currPage=t,o.log.debug("Paginate.setPage: current page is %d",this.currPage),this._pageChange()):o.log.warn("Paginate.setPage: invalid page number %d",t)},r.prototype.hasNext=function(){return this.cache.hasNext()},r.prototype.hasPrev=function(){return this.currPage>1},r.prototype.onPageChange=function(t,e){var i=this.pageChangeListeners,r=[t,e];return i.push(r),t.call(e,this.currPage),function(){o.remove(i,r)}},r.prototype.onPageCount=function(t,e){var i=this.pageCountListeners,r=[t,e];return i.push(r),this.pageCount>-1?t.call(e,this.pageCount,this.couldHaveMore):this._countPages(),function(){o.remove(i,r)}},r.prototype.getCountByDowloadingAllKeys=function(t,e){var i=this;i.downloadingEverything=!0;var r=i.ref.ref.toString();r.match(/\/$/)||(r+="/"),r+=".json?shallow=true",s(r,function(r){var s=0;try{s=o.keys(JSON.parse(r)).length}catch(a){o.log.warn(a)}o.log.debug("Paginate.getCountByDownloadingAllKeys: found %d keys",s),i.downloadingEverything=!1,i.pageCount=n(s,i.pageSize),i.couldHaveMore=!1,i._notifyPageCount(),t&&t.call(e,s)})},r.prototype.destroy=function(){this.cache.destroy(),this.cache=null,this.ref=null,o.each(this.subs,function(t){t()}),this.subs=[],this.pageCountListeners.length=0,this.pageChangeListeners.length=0},r.prototype._countPages=function(){var t=this,e=t.currPage;if(!this.downloadingEverything)if(t.pageCount===-1){var i=t.max,r=t.pageSize,n=this.ref.ref.limitToFirst(i);n.once("value",function(e){t.pageCount===-1&&(t.couldHaveMore=e.numChildren()===i,t.pageCount=Math.ceil(e.numChildren()/r),t._notifyPageCount(),t._countPages())})}else e>=t.pageCount&&(t.pageCount=e,t.couldHaveMore=t.cache.hasNext(),t._notifyPageCount())},r.prototype._pageChange=function(){var t=this.currPage,e=(t-1)*this.pageSize;this.cache.moveTo(e,this.pageSize),this._countPages(),o.each(this.pageChangeListeners,function(e){e[0].call(e[1],t)})},r.prototype._notifyPageCount=function(){var t=this.pageCount,e=this.couldHaveMore;o.each(this.pageCountListeners,function(i){i[0].call(i[1],t,e)})},e.exports=r},{"../../common":25,"./Cache":19}],22:[function(t,e,i){"use strict";function r(t){this._ref=t,this._obs=new a.Observable(["value","child_added","child_removed","child_moved","child_changed"]),this.ref=this._ref}function n(t){return function(){var e=a.toArray(arguments),i=this.ref;return i[t].apply(i,e)}}function s(t){return function(){throw new Error(t+" is not supported. This is a read-only reference. You can modify child records after calling .child(), or work with the original by using .ref")}}function o(t){return function(){throw new Error(t+" is not supported for Paginate and Scroll references. Try calling it on the original reference used to create the instance instead.")}}var a=t("../../common");r.prototype={on:function(t,e,i,r){this._obs.observe(t,e,i,r)},once:function(t,e,i,r){function n(i){s.off(t,n,s),e.call(r,i)}var s=this;this.on(t,n,i,this)},off:function(t,e,i){this._obs.stopObserving(t,e,i)},child:n("child"),parent:n("parent"),root:n("root"),name:n("name"),key:n("key"),toString:n("toString"),auth:n("auth"),unauth:n("unauth"),authWithCustomToken:n("authWithCustomToken"),authAnonymously:n("authAnonymously"),authWithPassword:n("authWithPassword"),authWithOAuthPopup:n("authWithOAuthPopup"),authWithOAuthRedirect:n("authWithOAuthRedirect"),authWithOAuthToken:n("authWithOAuthToken"),getAuth:n("getAuth"),onAuth:n("onAuth"),offAuth:n("offAuth"),createUser:n("createUser"),changePassword:n("changePassword"),removeUser:n("removeUser"),resetPassword:n("resetPassword"),changeEmail:n("changeEmail"),goOffline:n("goOffline"),goOnline:n("goOnline"),set:s("set"),update:s("update"),remove:s("remove"),push:s("push"),setWithPriority:s("setWithPriority"),setPriority:s("setPriority"),transaction:s("transaction"),limit:o("limit"),onDisconnect:o("onDisconnect"),orderByChild:o("orderByChild"),orderByKey:o("orderByKey"),orderByPriority:o("orderByPriority"),limitToFirst:o("limitToFirst"),limitToLast:o("limitToLast"),startAt:o("startAt"),endAt:o("endAt"),equalTo:o("equalTo"),$trigger:function(){this._obs.triggerEvent.apply(this._obs,a.toArray(arguments))}},e.exports=r},{"../../common":25}],23:[function(t,e,i){"use strict";function r(t,e,i){this.max=i.windowSize,this.start=0,this.end=0,this.cache=new n(t,e,i.maxCacheSize)}var n=t("./Cache");r.prototype.next=function(t){this.hasNext()&&(this.end=this.end+t,this.start=Math.max(0,this.end-this.max,this.start),this.cache.moveTo(this.start,this.end-this.start))},r.prototype.prev=function(t){this.hasPrev()&&(this.start=Math.max(0,this.start-t),this.end=Math.min(this.start+this.max,this.end),this.cache.moveTo(this.start,this.end-this.start))},r.prototype.hasNext=function(){return this.cache.hasNext()},r.prototype.hasPrev=function(){return this.start>0},r.prototype.observeHasNext=function(t,e){return this.cache.observeHasNext(t,e)},r.prototype.destroy=function(){this.cache.destroy(),this.ref=null,this.cache=null},e.exports=r},{"./Cache":19}],24:[function(t,e,i){var r=t("./index.js");i.log=r.log,i.logLevel=r.logLevel,i.escapeEmail=r.escapeEmail},{"./index.js":25}],25:[function(t,e,i){var r=t("./libs/util.js"),n=t("./libs/logger.js");r.extend(i,r,{args:t("./libs/args.js"),log:n,logLevel:n.logLevel,Observable:t("./libs/Observable.js"),Observer:t("./libs/Observer.js"),queue:t("./libs/queue.js")})},{"./libs/Observable.js":26,"./libs/Observer.js":27,"./libs/args.js":28,"./libs/logger.js":29,"./libs/queue.js":30,"./libs/util.js":31}],26:[function(t,e,i){"use strict";function r(t,e){e||(e={}),this._observableProps=a(t,e),this.resetObservers()}function n(t,e){h.each(e,function(e){var i=h.indexOf(t,e);i>=0&&t.splice(i,1)})}function s(t,e){var i=[];return h.each(e,function(e){h.has(t.observers,e)?t.observers[e].length&&(i=i.concat(t.observers[e])):c.warn("Observable.hasObservers: invalid event type %s",e)}),i}function o(t,e,i){h.has(e.oneTimeResults,t)&&i.notify.apply(i,e.oneTimeResults[t])}function a(t,e){return h.extend({onAdd:h.noop,onRemove:h.noop,onEvent:h.noop,oneTimeEvents:[]},e,{eventsMonitored:t,observers:{},oneTimeResults:{}})}var h=t("./util.js"),u=t("./args.js"),c=t("./logger.js"),l=t("./Observer.js");r.prototype={observe:function(t,e,i,r){var n,s=u("observe",arguments,2,4);return t=s.nextFromReq(this._observableProps.eventsMonitored),t&&(e=s.nextReq("function"),i=s.next("function"),r=s.next("object"),n=new l(this,t,e,r,i),this._observableProps.observers[t].push(n),this._observableProps.onAdd(t,n),this.isOneTimeEvent(t)&&o(t,this._observableProps,n)),n},hasObservers:function(t){return this.getObservers(t).length>0},stopObserving:function(t,e,i){var r=u("stopObserving",arguments);t=r.next(["array","string"],this._observableProps.eventsMonitored),e=r.next(["function"]),i=r.next(["object"]),h.each(t,function(t){var r=[],s=this.getObservers(t);h.each(s,function(n){n.matches(t,e,i)&&(n.notifyCancelled(null),r.push(n))},this),n(this._observableProps.observers[t],r),r.length&&this._observableProps.onRemove(t,r)},this)},abortObservers:function(t){var e=[];if(this.hasObservers()){var i=this.getObservers().slice();h.each(i,function(i){i.notifyCancelled(t),e.push(i)},this),this.resetObservers(),e.length&&this._observableProps.onRemove(this.event,e)}},getObservers:function(t){return t=u("getObservers",arguments).listFrom(this._observableProps.eventsMonitored,!0),s(this._observableProps,t)},triggerEvent:function(t){var e=u("triggerEvent",arguments),i=e.listFromWarn(this._observableProps.eventsMonitored,!0),r=e.restAsList();i&&h.each(i,function(e){if(this.isOneTimeEvent(t)){if(h.isArray(this._observableProps.oneTimeResults,t))return void c.warn("One time event was triggered twice, should by definition be triggered once",t);this._observableProps.oneTimeResults[t]=r}var i=this.getObservers(e),n=0;h.each(i,function(t){t.notify.apply(t,r.slice(0)),n++}),this._observableProps.onEvent.apply(null,[e,n].concat(r.slice(0)))},this)},resetObservers:function(){h.each(this._observableProps.eventsMonitored,function(t){this._observableProps.observers[t]=[]},this)},isOneTimeEvent:function(t){return h.contains(this._observableProps.oneTimeEvents,t)},observeOnce:function(t,e,i,r){var n,s=u("observeOnce",arguments,2,4);return t=s.nextFromWarn(this._observableProps.eventsMonitored),t&&(e=s.nextReq("function"),i=s.next("function"),r=s.next("object"),n=new l(this,t,e,r,i,(!0)),this._observableProps.observers[t].push(n),this._observableProps.onAdd(t,n),this.isOneTimeEvent(t)&&o(t,this._observableProps,n)),n}},e.exports=r},{"./Observer.js":27,"./args.js":28,"./logger.js":29,"./util.js":31}],27:[function(t,e,i){"use strict";function r(t,e,i,r,n,s){if("function"!=typeof i)throw new Error("Must provide a valid notifyFn");this.observable=t,this.fn=i,this.event=e,this.cancelFn=n||function(){},this.context=r,this.oneTimeEvent=!!s}var n=t("./util.js");r.prototype={notify:function(){var t=n.toArray(arguments);this.fn.apply(this.context,t),this.oneTimeEvent&&this.observable.stopObserving(this.event,this.fn,this.context)},matches:function(t,e,i){return n.isArray(t)?n.contains(t,function(t){return this.matches(t,e,i)},this):!(t&&t!==this.event||e&&e!==this&&e!==this.fn||i&&i!==this.context)},notifyCancelled:function(t){this.cancelFn.call(this.context,t||null)}},e.exports=r},{"./util.js":31}],28:[function(t,e,i){"use strict";function r(t,e,i,n){if("string"!=typeof t||!h.isObject(e))throw new Error("Args requires at least 2 args: fnName, arguments[, minArgs, maxArgs]");if(!(this instanceof r))return new r(t,e,i,n);this.fnName=t,this.argList=h.toArray(e),this.origArgs=h.toArray(e);var s=this.length=this.argList.length;if(this.pos=-1,h.isUndefined(i)&&(i=0),h.isUndefined(n)&&(n=this.argList.length),s<i||s>n){var o=n>i?h.printf("%d to %d",i,n):i;throw Error(h.printf("%s must be called with %s arguments, but received %d",t,o,s))}}function n(t,e){return e===!0||(h.isArray(e)||(e=[e]),h.contains(e,function(e){switch(e){case"array":return h.isArray(t);case"string":return"string"==typeof t;case"number":return isFinite(parseInt(t,10));case"int":case"integer":return isFinite(parseFloat(t));case"object":return h.isObject(t);case"function":return"function"==typeof t;case"bool":case"boolean":return"boolean"==typeof t;case"boolean-like":return!h.isObject(t);default:throw new Error("Args received an invalid data type: "+e)}}))}function s(t,e,i,r){if(r=h.printf("%s: invalid argument at pos %d, %s (received %s)",e,i,r),t===!0)throw new Error(r);if(!h.has(u,t))throw new Error("The `required` value passed to Args methods must either be true or a method name from logger");u[t](r)}function o(t,e,i){u.warn("%s: invalid choice %s, must be one of [%s]",t,e,i)}function a(t,e){if(e===!0)return t;var i=h.isArray(e)?e[0]:e;switch(i){case"array":return h.isArray(t)?t:[t];case"string":return t+"";case"number":return parseFloat(t);case"int":case"integer":return parseInt(t,10);case"bool":case"boolean":case"boolean-like":return!!t;case"function":case"object":return t;default:throw new Error("Args received an invalid data type: "+i)}}var h=t("./util.js"),u=t("./logger.js");r.prototype={orig:function(){return this.origArgs.slice(0)},restAsList:function(t,e){var i=this.argList.slice(0);if(t||e)for(var r=0,n=i.length;r<n;r++)this._arg(e||!0,null,r<t);return i},skip:function(){return this.argList.length&&(this.pos++,this.argList.shift()),this},next:function(t,e){return this._arg(t,e,!1)},nextWarn:function(t,e){return this._arg(t,e,"warn")},nextReq:function(t){return this._arg(t,null,!0)},nextFrom:function(t,e){return this._from(t,e,!1)},nextFromWarn:function(t,e){return this._from(t,e,"warn")},nextFromReq:function(t){return this._from(t,null,!0)},listFrom:function(t,e){return this._list(t,e,!1)},listFromWarn:function(t,e){return this._list(t,e,"warn")},listFromReq:function(t){return this._list(t,null,!0)},_arg:function(t,e,i){return this.pos++,(h.isUndefined(t)||null===t)&&(t=!0),this.argList.length&&n(this.argList[0],t)?a(this.argList.shift(),t):(i&&s(i,this.fnName,this.pos,h.printf("must be of type %s",t)),e)},_from:function(t,e,i){return this.pos++,this.argList.length&&h.contains(t,this.argList[0])?this.argList.shift():(i&&s(i,this.fnName,this.pos,h.printf("must be one of %s",t)),e)},_list:function(t,e,i){this.pos++;var r=[],n=this.argList[0];return!this.argList.length||h.isEmpty(n)||!h.isArray(n)&&h.isObject(n)||(this.argList.shift(),h.isArray(n)?r=h.map(n,function(e){return h.contains(t,e)?e:void o(this.fnName,e,t)},this):h.contains(t,n)?r=[n]:o(this.fnName,n,t)),h.isEmpty(r)?(i&&s(i,this.fnName,this.pos,h.printf("choices must be in [%s]",t)),e===!0?t:e):r}},e.exports=r},{"./logger.js":29,"./util.js":31}],29:[function(t,e,i){"use strict";function r(t){return t.charAt(0).toUpperCase()+t.substr(1)}function n(){var t;return"undefined"!=typeof window&&window.location&&window.location.search&&(t=window.location.search.match("\bdebugLevel=([0-9]+)\b")),t?parseInt(t[1],10):h}function s(){return!0}function o(t,e){return!e.length||(t instanceof RegExp?!t.test(e[0]+""):!(e[0]+"").match(t))}function a(t){switch(t){case!1:return 0;case"off":return 0;case"none":return 0;case"error":return 1;case"warn":return 2;case"warning":return 2;case"info":return 3;case"log":return 4;case"debug":return 5;case!0:return h;case"on":return h;case"all":return h;default:return h}}var h=2,u=!1,c={error:s,warn:s,info:s,log:s,debug:s,time:s,timeEnd:s,group:s,groupEnd:s},l=t("./util.js"),f=function(){f.log.apply(null,l.toArray(arguments))};f.warn=s,f.error=s,f.info=s,f.log=s,f.debug=s,f.isErrorEnabled=s,f.isWarnEnabled=s,f.isInfoEnabled=s,f.isLogEnabled=s,f.isDebugEnabled=s,f.logLevel=function(t,e){if("number"!=typeof t&&(t=a(t)),u===t)return function(){};l.each(["error","warn","info","log","debug"],function(i,n){var a="undefined"!=typeof console&&t>=n+1;if(a){var h=l.bind(console["debug"===i?"log":i],console);f[i]=function(){var t=l.toArray(arguments);if(t.length>1&&"string"==typeof t[0]){var i=t[0].match(/(%s|%d|%j)/g);if(i){var r=[l.printf.apply(l,t)];t=t.length>i.length+1?r.concat(t.slice(i.length+1)):r}}e&&o(e,t)||h.apply("undefined"==typeof console?c:console,t)}}else f[i]=s;f["is"+r(i)+"Enabled"]=function(){return a}});var i=function(t){return function(){f.logLevel(t)}}(u);return u=t,i},f.logLevel(n()),e.exports=f},{"./util.js":31}],30:[function(t,e,i){"use strict";function r(t){this.needs=0,this.met=0,this.queued=[],this.errors=[],this.criteria=[],this.processing=!1,n.each(t,this.addCriteria,this)}var n=t("./util.js");r.prototype={addCriteria:function(t,e){if(this.processing)throw new Error("Cannot call addCriteria() after invoking done(), fail(), or handler() methods");return this.criteria.push(e?[t,e]:t),this},getHandler:function(){var t,e;return this.addCriteria(function(i){e!==n.undef?i(e):t=i}),function(i){t?t(i):e=i}},ready:function(){return this.needs===this.met},done:function(t,e){return t&&this._runOrStore(function(){this.hasErrors()||t.call(e)}),this},fail:function(t,e){return this._runOrStore(function(){this.hasErrors()&&t.apply(e,this.getErrors())}),this},handler:function(t,e){return this._runOrStore(function(){t.apply(e,this.getErrors())}),this},chain:function(t){return this.addCriteria(t.handler,t),this},when:function(t){this._runOrStore(function(){this.hasErrors()?t.reject.apply(t,this.getErrors()):t.resolve()})},addError:function(t){this.errors.push(t)},hasErrors:function(){return this.errors.length},getErrors:function(){return this.errors.slice(0)},_process:function(){this.processing=!0,this.needs=this.criteria.length,n.each(this.criteria,this._evaluateCriteria,this)},_evaluateCriteria:function(t){var e=null;n.isArray(t)&&(e=t[1],t=t[0]);try{t.call(e,n.bind(this._criteriaMet,this))}catch(i){this.addError(i)}},_criteriaMet:function(t){t&&this.addError(t),this.met++,this.ready()&&n.each(this.queued,this._run,this)},_runOrStore:function(t){this.processing||this._process(),this.ready()?this._run(t):this.queued.push(t)},_run:function(t){t.call(this)}},e.exports=function(t,e){var i=new r(t);return e&&i.done(e),i}},{"./util.js":31}],31:[function(t,e,i){(function(e){"use strict";function r(t,e){switch(e){case"%d":return parseInt(t,10);case"%j":return t=c.isObject(t)?JSON.stringify(t):t+"",t.length>500&&(t=t.substr(0,500)+".../*truncated*/...}"),t;case"%s":return t+"";default:return t}}function n(t){return c.isObject(t)&&t+""=="[object Arguments]"}function s(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,n.prototype=new r,n}function o(t,e){var i,r;for(i=0,r=this.length;i<r;++i)i in this&&t.call(e,this[i],i,this)}function a(t){return"[object Array]"===Object.prototype.toString.call(t)}function h(t,e){if(null===this)throw new TypeError;var i,r,n=Object(this),s=n.length>>>0;if(0===s)return-1;if(i=0,arguments.length>1&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&i!==1/0&&i!==-(1/0)&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=s)return-1;for(r=i>=0?i:Math.max(s-Math.abs(i),0);r<s;r++)if(r in n&&n[r]===t)return r;return-1}var u,c=i,l=["value","child_added","child_removed","child_updated","child_changed"];c.undef=u,c.firebase=e.firebase||t("firebase"),c.isDefined=function(t){return t!==u},c.isUndefined=function(t){return t===u},c.isObject=function(t){return Object.prototype.isPrototypeOf(t)},c.isArray=function(t){return(Array.isArray||a).call(null,t)},c.isArrayLike=function(t){return c.isArray(t)||n(t)},c.isFunction=function(t,e){return"string"==typeof e?c.isObject(t)&&c.has(t,e)&&"function"==typeof t[e]:"function"==typeof t},c.toArray=function(t,e){var i=c.map(t,function(t,e){return t});return e>0?i.slice(e):i},c.extend=function(t,e){var i=c.toArray(arguments),r="boolean"==typeof i[0]&&i.shift(),n=i.shift();return c.each(i,function(t){c.isObject(t)&&c.each(t,function(t,e){n[e]=r&&c.isObject(n[e])?c.extend(!0,n[e],t):t})}),n},c.bind=function(t,e){var i=Array.prototype.slice.call(arguments,1);return(t.bind||s).apply(t,i)},c.isEmpty=function(t){return t===u||null===t||c.isArrayLike(t)&&0===t.length||c.isObject(t)&&!c.contains(t,function(t){return!0})},c.keys=function(t){var e=[];return c.each(t,function(t,i){e.push(i)}),e},c.map=function(t,e,i){var r=[];return c.each(t,function(n,s){var o=e.call(i,n,s,t);o!==u&&r.push(o)}),r},c.mapObject=function(t,e,i){var r={};return c.each(t,function(n,s){var o=e.call(i,n,s,t);o!==u&&(r[s]=o)}),r},c.find=function(t,e,i){if(c.isArrayLike(t)){for(var r=0,n=t.length;r<n;r++)if(e.call(i,t[r],r,t)===!0)return t[r]}else if(c.isObject(t)){var s;for(s in t)if(t.hasOwnProperty(s)&&e.call(i,t[s],s,t)===!0)return t[s]}return u},c.filter=function(t,e,i){var r=c.isArrayLike(t),n=r?[]:{};return c.each(t,function(s,o){e.call(i,s,o,t)&&(r?n.push(s):n[o]=s)}),n},c.reduce=function(t,e,i){return c.each(t,function(r,n){e=i(e,r,n,t)}),e},c.has=function(t,e){return c.isObject(t)&&t[e]!==u},c.val=function(t,e){return c.has(t,e)?t[e]:u},c.contains=function(t,e,i){if("function"!=typeof e){if(c.isArray(t))return c.indexOf(t,e)>-1;e=function(t){return function(e){return e===t}}(e)}return c.find(t,e,i)!==u},c.each=function(t,e,i){if(c.isArrayLike(t))(t.forEach||o).call(t,e,i);else if(c.isObject(t)){var r;for(r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)}},c.indexOf=function(t,e){return(t.indexOf||h).call(t,e);
},c.remove=function(t,e){var i=!1;if(c.isArray(t)){var r=c.indexOf(t,e);r>-1&&(t.splice(r,1),i=!0)}else if(c.isObject(t)){var n;for(n in t)if(t.hasOwnProperty(n)&&e===t[n]){i=!0,delete t[n];break}}return i},c.defer=function(t,e){var i=c.toArray(arguments);setTimeout(c.bind.apply(null,i),0)},c.call=function(t,e){var i=c.toArray(arguments,2),r=[];return c.each(t,function(t){return"function"!=typeof t||e?void(c.isObject(t)&&"function"==typeof t[e]&&r.push(t[e].apply(t,i))):r.push(t.apply(null,i))}),r},c.isEqual=function(t,e,i){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(c.isObject(t)&&c.isObject(e)){var r=c.isArrayLike(t),n=c.isArrayLike(e);if(r||n)return r&&n&&t.length===e.length&&!c.contains(t,function(t,i){return!c.isEqual(t,e[i])});var s=i?c.keys(t):c.keys(t).sort(),o=i?c.keys(e):c.keys(e).sort();return c.isEqual(s,o)&&!c.contains(t,function(t,i){return!c.isEqual(t,e[i])})}return!1},c.bindAll=function(t,e){return c.each(e,function(i,r){"function"==typeof i&&(e[r]=c.bind(i,t))}),e},c.printf=function(){var t=c.toArray(arguments),e=t.shift(),i=e.match(/(%s|%d|%j)/g);return i&&t.length&&c.find(i,function(i){return e=e.replace(i,r(t.shift(),i)),0===t.length}),e},c.mergeToString=function(t){return 0===t.length?null:1===t.length?t[0]:"["+t.join("][")+"]"},c.construct=function(t,e){function i(){return t.apply(this,e)}return i.prototype=t.prototype,new i},c.noop=function(){};var f=[];c.isFirebaseRef=function(t){if(!c.isObject(t))return!1;var e=Object.getPrototypeOf(t);return!(!e||e.constructor!==c.firebase.database.prototype.constructor)||("object"==typeof t.ref&&"function"==typeof t.ref.transaction||c.isFirebaseRefWrapper(t))},c.isFirebaseRefWrapper=function(t){return c.contains(f,function(e){return t instanceof e})},c.isQueryRef=function(t){return c.isFirebaseRef(t)&&"function"!=typeof t.transaction},c.registerFirebaseWrapper=function(t){f.push(t)},c._mockFirebaseRef=function(t){c.firebase=t},c.escapeEmail=function(t){return(t||"").replace(".",",")},c.assertValidEvent=function(t){if(!c.contains(l,t))throw new Error("Event must be one of "+l+", but received "+t)},c.inherits=function(t,e){var i=[t.prototype].concat(c.toArray(arguments).slice(2));return t.prototype=new e,t.prototype.constructor=e,c.each(i,function(e){c.each(e,function(e,i){t.prototype[i]=e})}),t.prototype._super=function(){e.apply(this,arguments)},t},c.deepCopy=function(t){if(!c.isObject(t))return t;var e=c.isArrayLike(t)?[]:{};return c.each(t,function(t,i){e[i]=c.deepCopy(t)}),e},c.pick=function(t,e){if(!c.isObject(t))return{};var i=c.isArrayLike(t)?[]:{};return c.each(e,function(e){i[e]=t[e]}),i},c.eachByPath=function(t,e,i,r){var n={};c.each(e,function(e,i){var r=t.pathFor(i),s=t.getField(i),o=s?s.id:i;c.has(n,r.name())||(n[r.name()]={path:r,data:{}}),n[r.name()].data[o]=e}),c.each(n,function(t){i.call(r,t.path,t.data)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{firebase:"firebase"}],"firebase-util":[function(t,e,i){"use strict";var r=t("./common/index.js");r.extend(i,t("./common/exports.js"),t("./NormalizedCollection/exports.js"),t("./Paginate/exports.js")),"undefined"!=typeof window&&(window.hasOwnProperty("firebase")?window.firebase.util=r:console.warn("Firebase not found on the global window instance. Cannot add firebase.util namespace."))},{"./NormalizedCollection/exports.js":2,"./Paginate/exports.js":18,"./common/exports.js":24,"./common/index.js":25}]},{},[1]);